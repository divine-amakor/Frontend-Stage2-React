{"ast":null,"code":"import { auth } from './auth';\nconst TICKETS_KEY = 'ticketapp_tickets';\nconst getTickets = () => {\n  const tickets = localStorage.getItem(TICKETS_KEY);\n  return tickets ? JSON.parse(tickets) : [];\n};\nconst saveTickets = tickets => {\n  localStorage.setItem(TICKETS_KEY, JSON.stringify(tickets));\n};\nconst getUserTickets = userId => {\n  return getTickets().filter(ticket => ticket.userId === userId);\n};\nexport const ticketService = {\n  getAll: () => {\n    const currentUser = auth.getCurrentUser();\n    return currentUser ? getUserTickets(currentUser.userId) : [];\n  },\n  getById: id => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return null;\n    const tickets = getUserTickets(currentUser.userId);\n    return tickets.find(ticket => ticket.id === id);\n  },\n  create: ticketData => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return null;\n    const tickets = getTickets();\n    const newTicket = {\n      id: Date.now().toString(),\n      userId: currentUser.userId,\n      ...ticketData,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n    tickets.push(newTicket);\n    saveTickets(tickets);\n    return newTicket;\n  },\n  update: (id, ticketData) => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return null;\n    const tickets = getTickets();\n    const index = tickets.findIndex(ticket => ticket.id === id && ticket.userId === currentUser.userId);\n    if (index !== -1) {\n      tickets[index] = {\n        ...tickets[index],\n        ...ticketData,\n        updatedAt: new Date().toISOString()\n      };\n      saveTickets(tickets);\n      return tickets[index];\n    }\n    return null;\n  },\n  delete: id => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return false;\n    const tickets = getTickets();\n    const filteredTickets = tickets.filter(ticket => !(ticket.id === id && ticket.userId === currentUser.userId));\n    saveTickets(filteredTickets);\n    return true;\n  },\n  getStats: () => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return {\n      total: 0,\n      open: 0,\n      inProgress: 0,\n      closed: 0\n    };\n    const tickets = getUserTickets(currentUser.userId);\n    return {\n      total: tickets.length,\n      open: tickets.filter(t => t.status === 'open').length,\n      inProgress: tickets.filter(t => t.status === 'in_progress').length,\n      closed: tickets.filter(t => t.status === 'closed').length\n    };\n  }\n};","map":{"version":3,"names":["auth","TICKETS_KEY","getTickets","tickets","localStorage","getItem","JSON","parse","saveTickets","setItem","stringify","getUserTickets","userId","filter","ticket","ticketService","getAll","currentUser","getCurrentUser","getById","id","find","create","ticketData","newTicket","Date","now","toString","createdAt","toISOString","updatedAt","push","update","index","findIndex","delete","filteredTickets","getStats","total","open","inProgress","closed","length","t","status"],"sources":["C:/Users/Divine/Desktop/HNG/Frontend Stage2 React/src/utils/tickets.js"],"sourcesContent":["import { auth } from './auth';\n\nconst TICKETS_KEY = 'ticketapp_tickets';\n\nconst getTickets = () => {\n  const tickets = localStorage.getItem(TICKETS_KEY);\n  return tickets ? JSON.parse(tickets) : [];\n};\n\nconst saveTickets = (tickets) => {\n  localStorage.setItem(TICKETS_KEY, JSON.stringify(tickets));\n};\n\nconst getUserTickets = (userId) => {\n  return getTickets().filter(ticket => ticket.userId === userId);\n};\n\nexport const ticketService = {\n  getAll: () => {\n    const currentUser = auth.getCurrentUser();\n    return currentUser ? getUserTickets(currentUser.userId) : [];\n  },\n\n  getById: (id) => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return null;\n    \n    const tickets = getUserTickets(currentUser.userId);\n    return tickets.find(ticket => ticket.id === id);\n  },\n\n  create: (ticketData) => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return null;\n    \n    const tickets = getTickets();\n    const newTicket = {\n      id: Date.now().toString(),\n      userId: currentUser.userId,\n      ...ticketData,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n    tickets.push(newTicket);\n    saveTickets(tickets);\n    return newTicket;\n  },\n\n  update: (id, ticketData) => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return null;\n    \n    const tickets = getTickets();\n    const index = tickets.findIndex(ticket => ticket.id === id && ticket.userId === currentUser.userId);\n    if (index !== -1) {\n      tickets[index] = {\n        ...tickets[index],\n        ...ticketData,\n        updatedAt: new Date().toISOString()\n      };\n      saveTickets(tickets);\n      return tickets[index];\n    }\n    return null;\n  },\n\n  delete: (id) => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return false;\n    \n    const tickets = getTickets();\n    const filteredTickets = tickets.filter(ticket => !(ticket.id === id && ticket.userId === currentUser.userId));\n    saveTickets(filteredTickets);\n    return true;\n  },\n\n  getStats: () => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return { total: 0, open: 0, inProgress: 0, closed: 0 };\n    \n    const tickets = getUserTickets(currentUser.userId);\n    return {\n      total: tickets.length,\n      open: tickets.filter(t => t.status === 'open').length,\n      inProgress: tickets.filter(t => t.status === 'in_progress').length,\n      closed: tickets.filter(t => t.status === 'closed').length\n    };\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}