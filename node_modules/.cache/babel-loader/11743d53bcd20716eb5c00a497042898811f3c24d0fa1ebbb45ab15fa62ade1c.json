{"ast":null,"code":"import _objectSpread from\"C:/Users/Divine/Desktop/HNG/Frontend Stage2 React/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{auth}from'./auth';const TICKETS_KEY='ticketapp_tickets';const getTickets=()=>{const tickets=localStorage.getItem(TICKETS_KEY);return tickets?JSON.parse(tickets):[];};const saveTickets=tickets=>{localStorage.setItem(TICKETS_KEY,JSON.stringify(tickets));};const getUserTickets=userId=>{return getTickets().filter(ticket=>ticket.userId===userId);};export const ticketService={getAll:()=>{const currentUser=auth.getCurrentUser();return currentUser?getUserTickets(currentUser.userId):[];},getById:id=>{const currentUser=auth.getCurrentUser();if(!currentUser)return null;const tickets=getUserTickets(currentUser.userId);return tickets.find(ticket=>ticket.id===id);},create:ticketData=>{const currentUser=auth.getCurrentUser();if(!currentUser)return null;const tickets=getTickets();const newTicket=_objectSpread(_objectSpread({id:Date.now().toString(),userId:currentUser.userId},ticketData),{},{createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});tickets.push(newTicket);saveTickets(tickets);return newTicket;},update:(id,ticketData)=>{const currentUser=auth.getCurrentUser();if(!currentUser)return null;const tickets=getTickets();const index=tickets.findIndex(ticket=>ticket.id===id&&ticket.userId===currentUser.userId);if(index!==-1){tickets[index]=_objectSpread(_objectSpread(_objectSpread({},tickets[index]),ticketData),{},{updatedAt:new Date().toISOString()});saveTickets(tickets);return tickets[index];}return null;},delete:id=>{const currentUser=auth.getCurrentUser();if(!currentUser)return false;const tickets=getTickets();const filteredTickets=tickets.filter(ticket=>!(ticket.id===id&&ticket.userId===currentUser.userId));saveTickets(filteredTickets);return true;},getStats:()=>{const currentUser=auth.getCurrentUser();if(!currentUser)return{total:0,open:0,inProgress:0,closed:0};const tickets=getUserTickets(currentUser.userId);return{total:tickets.length,open:tickets.filter(t=>t.status==='open').length,inProgress:tickets.filter(t=>t.status==='in_progress').length,closed:tickets.filter(t=>t.status==='closed').length};}};","map":{"version":3,"names":["auth","TICKETS_KEY","getTickets","tickets","localStorage","getItem","JSON","parse","saveTickets","setItem","stringify","getUserTickets","userId","filter","ticket","ticketService","getAll","currentUser","getCurrentUser","getById","id","find","create","ticketData","newTicket","_objectSpread","Date","now","toString","createdAt","toISOString","updatedAt","push","update","index","findIndex","delete","filteredTickets","getStats","total","open","inProgress","closed","length","t","status"],"sources":["C:/Users/Divine/Desktop/HNG/Frontend Stage2 React/src/utils/tickets.js"],"sourcesContent":["import { auth } from './auth';\n\nconst TICKETS_KEY = 'ticketapp_tickets';\n\nconst getTickets = () => {\n  const tickets = localStorage.getItem(TICKETS_KEY);\n  return tickets ? JSON.parse(tickets) : [];\n};\n\nconst saveTickets = (tickets) => {\n  localStorage.setItem(TICKETS_KEY, JSON.stringify(tickets));\n};\n\nconst getUserTickets = (userId) => {\n  return getTickets().filter(ticket => ticket.userId === userId);\n};\n\nexport const ticketService = {\n  getAll: () => {\n    const currentUser = auth.getCurrentUser();\n    return currentUser ? getUserTickets(currentUser.userId) : [];\n  },\n\n  getById: (id) => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return null;\n    \n    const tickets = getUserTickets(currentUser.userId);\n    return tickets.find(ticket => ticket.id === id);\n  },\n\n  create: (ticketData) => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return null;\n    \n    const tickets = getTickets();\n    const newTicket = {\n      id: Date.now().toString(),\n      userId: currentUser.userId,\n      ...ticketData,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString()\n    };\n    tickets.push(newTicket);\n    saveTickets(tickets);\n    return newTicket;\n  },\n\n  update: (id, ticketData) => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return null;\n    \n    const tickets = getTickets();\n    const index = tickets.findIndex(ticket => ticket.id === id && ticket.userId === currentUser.userId);\n    if (index !== -1) {\n      tickets[index] = {\n        ...tickets[index],\n        ...ticketData,\n        updatedAt: new Date().toISOString()\n      };\n      saveTickets(tickets);\n      return tickets[index];\n    }\n    return null;\n  },\n\n  delete: (id) => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return false;\n    \n    const tickets = getTickets();\n    const filteredTickets = tickets.filter(ticket => !(ticket.id === id && ticket.userId === currentUser.userId));\n    saveTickets(filteredTickets);\n    return true;\n  },\n\n  getStats: () => {\n    const currentUser = auth.getCurrentUser();\n    if (!currentUser) return { total: 0, open: 0, inProgress: 0, closed: 0 };\n    \n    const tickets = getUserTickets(currentUser.userId);\n    return {\n      total: tickets.length,\n      open: tickets.filter(t => t.status === 'open').length,\n      inProgress: tickets.filter(t => t.status === 'in_progress').length,\n      closed: tickets.filter(t => t.status === 'closed').length\n    };\n  }\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}